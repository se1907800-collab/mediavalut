<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Media Vault Pro - Cloud Edition</title>
  <link rel="stylesheet" href="style.css">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <!-- Login Section -->
  <div id="login-section" class="section active">
    <div class="login-container">
      <div class="logo">
        <div class="logo-icon">â˜ï¸ğŸ“‚</div>
        <h1>Media Vault Cloud</h1>
      </div>
      <div class="login-form">
        <h2>Enter Access Code</h2>
        <input type="password" id="access-code" placeholder="Enter secret code" />
        <button id="login-btn" class="btn-primary">Enter Vault</button>
        <p id="error-msg" class="error-message"></p>
        <div class="cloud-status" id="cloud-status">
          <span class="loading"></span>
          Checking cloud connection...
        </div>
      </div>
    </div>
  </div>

  <!-- Gallery Section -->
  <div id="gallery-section" class="section">
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">
          <span class="app-icon">â˜ï¸ğŸ“‚</span>
          Media Vault Cloud
        </h1>
        <div class="header-actions">
          <button class="btn-icon" id="refresh-btn" title="Refresh">
            <span>ğŸ”„</span>
          </button>
          <button class="btn-icon" id="settings-btn" title="Settings">
            <span>âš™ï¸</span>
          </button>
          <button class="btn-icon" id="logout-btn" title="Logout">
            <span>ğŸšª</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Sync Status Bar -->
    <div id="sync-status-bar" class="sync-status-bar">
      <span id="sync-icon">ğŸ”„</span>
      <span id="sync-text">Syncing...</span>
    </div>

    <!-- Breadcrumb -->
    <nav class="breadcrumb" id="breadcrumb">
      <button class="btn-icon" id="back-btn" style="display: none;">
        <span>â†</span>
      </button>
      <div class="breadcrumb-items" id="breadcrumb-items">
        <div class="breadcrumb-item active" data-folder="root">
          <span>ğŸ </span>
          Home
        </div>
      </div>
    </nav>

    <!-- Current Folder Content -->
    <main class="main-content">
      <div id="current-folder-content" class="folder-content">
        <!-- Dynamic content will be loaded here -->
      </div>
    </main>

    <!-- Organization Toolbar -->
    <div class="org-toolbar" id="org-toolbar">
      <button class="btn-toolbar" id="move-to-btn">
        <span>ğŸ“¦</span>
        Move
      </button>
      <button class="btn-toolbar" id="rename-btn">
        <span>âœï¸</span>
        Rename
      </button>
      <button class="btn-toolbar btn-danger" id="delete-btn">
        <span>ğŸ—‘ï¸</span>
        Delete
      </button>
      <button class="btn-toolbar" id="cancel-org-btn">
        <span>âŒ</span>
        Cancel
      </button>
    </div>

    <!-- Mobile Floating Action Button -->
    <div class="mobile-fab" id="mobile-fab">
      <button class="fab-main">+</button>
      <div class="fab-menu">
        <button data-action="create-folder">
          <span>ğŸ“</span>
          New Folder
        </button>
        <button data-action="add-link">
          <span>â•</span>
          Add Media
        </button>
        <button data-action="select-mode">
          <span>â˜‘ï¸</span>
          Select Items
        </button>
      </div>
    </div>
  </div>

  <!-- Video Player Modal -->
  <div id="video-player-modal" class="modal">
    <div class="modal-content video-player-content">
      <div class="video-player-header">
        <h3 id="video-player-title">Video Player</h3>
        <button class="btn-close" id="close-video-player">Ã—</button>
      </div>
      <div class="video-container">
        <iframe id="video-player" frameborder="0" allowfullscreen 
                allow="autoplay; encrypted-media"></iframe>
      </div>
    </div>
  </div>

  <!-- Add Media Modal -->
  <div id="add-media-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add Media</h3>
        <button class="btn-close" id="cancel-add-media">Ã—</button>
      </div>
      <div class="modal-body">
        <!-- Mobile Tabs -->
        <div class="mobile-tabs" id="mobile-tabs">
          <button class="mobile-tab active" data-tab="single">Single</button>
          <button class="mobile-tab" data-tab="batch">Multiple</button>
        </div>
        
        <!-- Single Media Tab -->
        <div class="tab-content active" id="single-tab">
          <input type="text" id="media-link" placeholder="Paste Google Drive link" />
          <select id="media-type">
            <option value="image">Image</option>
            <option value="video" selected>Video</option>
          </select>
          <input type="text" id="media-title" placeholder="Media title (optional)" />
        </div>
        
        <!-- Batch Media Tab -->
        <div class="tab-content" id="batch-tab">
          <textarea id="batch-links" 
                    placeholder="Paste multiple Google Drive links (one per line)
Example:
https://drive.google.com/file/d/ABC123/view
https://drive.google.com/file/d/DEF456/view"></textarea>
          <input type="text" id="batch-title" placeholder="Common title prefix (optional)" />
          <select id="batch-type">
            <option value="video" selected>Video</option>
            <option value="image">Image</option>
          </select>
          <p class="hint-text">You can add up to 10 links at once</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancel-add-media-btn">Cancel</button>
        <button class="btn-primary" id="confirm-add-media">Add Media</button>
      </div>
    </div>
  </div>

  <!-- Create Folder Modal -->
  <div id="create-folder-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create Folder</h3>
        <button class="btn-close" id="cancel-create-folder">Ã—</button>
      </div>
      <div class="modal-body">
        <input type="text" id="folder-name" placeholder="Folder name" />
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancel-create-folder-btn">Cancel</button>
        <button class="btn-primary" id="confirm-create-folder">Create</button>
      </div>
    </div>
  </div>

  <!-- Move To Modal -->
  <div id="move-to-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Move Items</h3>
        <button class="btn-close" id="cancel-move">Ã—</button>
      </div>
      <div class="modal-body">
        <select id="target-folder">
          <option value="">Select target folder</option>
        </select>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancel-move-btn">Cancel</button>
        <button class="btn-primary" id="confirm-move">Move</button>
      </div>
    </div>
  </div>

  <!-- Rename Modal -->
  <div id="rename-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Rename</h3>
        <button class="btn-close" id="cancel-rename">Ã—</button>
      </div>
      <div class="modal-body">
        <input type="text" id="rename-name" placeholder="New name" />
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancel-rename-btn">Cancel</button>
        <button class="btn-primary" id="confirm-rename">Rename</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Cloud Settings</h3>
        <button class="btn-close" id="cancel-settings">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="setting-group">
          <label>Firebase Status:</label>
          <div id="firebase-status" class="firebase-status">
            <span class="status-icon">ğŸ”„</span>
            <span class="status-text">Checking connection...</span>
          </div>
        </div>
        <div class="setting-info">
          <p><strong>About Firebase Sync:</strong></p>
          <ul>
            <li>All changes sync instantly across all your devices</li>
            <li>No login required - uses anonymous authentication</li>
            <li>Real-time updates - see changes from other devices immediately</li>
            <li>Your data is stored securely in Google Firebase</li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancel-settings-btn">Cancel</button>
        <button class="btn-primary" id="confirm-settings">Close</button>
      </div>
    </div>
  </div>

  <!-- Firebase configuration -->
  <script>
    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDJ1sbgsMVcPLsG96Ob_Zhco3wlZ0DMqk0",
      authDomain: "mediavault-fb492.firebaseapp.com",
      projectId: "mediavault-fb492",
      storageBucket: "mediavault-fb492.firebasestorage.app",
      messagingSenderId: "192876947768",
      appId: "1:192876947768:web:20a322eceed35b07ecb9cd"
    };
  </script>
  
  <script src="script.js"></script>
</body>
</html>
